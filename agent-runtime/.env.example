# ═══════════════════════════════════════════════════════════════
# PetriLabs Agent Runtime - Environment Configuration
# ═══════════════════════════════════════════════════════════════
# 
# 安全警告：
# - 此文件包含敏感信息（PRIVATE_KEY），启动后会被安全删除
# - 永远不要将此文件提交到版本控制
# - 确保文件权限：chmod 600 .env
# - 生产环境建议使用 Docker Secrets 或环境变量直接注入
#
# 配置方式（优先级）：
# 1. 环境变量（推荐用于生产）
# 2. 此 .env 文件（开发/过渡，读取后删除）
# ═══════════════════════════════════════════════════════════════

# ============================================
# 必需配置（核心）
# ============================================

# Agent 私钥（0x 开头，64 位十六进制）
# ⚠️  这是 Agent 的"生命密钥"，拥有其链上身份和资产控制权
# 格式：0x + 64 个十六进制字符（共 66 字符）
# 示例：0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef
PRIVATE_KEY=0x

# Agent 地址（用于验证私钥匹配）
# 格式：0x + 40 个十六进制字符（以太坊地址）
AGENT_ADDRESS=0x

# 基因组哈希（Agent 的基因身份）
# 格式：0x + 64 个十六进制字符（32 字节哈希）
GENOME_HASH=0x

# LLM API 密钥（认知能力）
# 支持：Claude, OpenAI, 或兼容 OpenAI 格式的 API
LLM_API_KEY=sk-

# ============================================
# 区块链配置（可选，有默认值）
# ============================================

# RPC 节点 URL
# 默认值：https://sepolia.base.org（Base Sepolia 测试网）
# 主网：https://mainnet.base.org
RPC_URL=https://sepolia.base.org

# 链 ID
# 默认值：84532（Base Sepolia）
# 主网：8453
CHAIN_ID=84532

# 合约地址
GENOME_REGISTRY_ADDRESS=0x
PETRI_AGENT_V2_ADDRESS=0x

# ============================================
# 运行参数（可选，有默认值）
# ============================================

# 心跳间隔（毫秒）
# 默认值：21600000（6 小时）
# 范围：21600000（6h）- 604800000（7d）
HEARTBEAT_INTERVAL_MS=21600000

# 决策间隔（毫秒）
# 默认值：3600000（1 小时）
DECISION_INTERVAL_MS=3600000

# LLM 模型选择
# 默认值：claude-3-sonnet-20240229
# 选项：claude-3-opus, claude-3-haiku, gpt-4, gpt-3.5-turbo
LLM_MODEL=claude-3-sonnet-20240229

# ============================================
# 高级配置（通常不需要修改）
# ============================================

# 日志级别
# 默认值：info
# 选项：debug, info, warn, error
LOG_LEVEL=info

# NKMC 网关配置（可选，用于基因表达优化）
# NKMC_JWT=
# NKMC_BASE_URL=
# NKMC_CACHE_PATH=./.nkmc-cache

# ============================================
# 部署检查清单
# ============================================

# 启动前请确认：
# [ ] PRIVATE_KEY 格式正确（0x + 64 hex chars）
# [ ] AGENT_ADDRESS 与 PRIVATE_KEY 匹配
# [ ] GENOME_HASH 已在 GenomeRegistry 注册
# [ ] RPC_URL 和 CHAIN_ID 匹配（测试网/主网）
# [ ] 合约地址正确配置
# [ ] LLM_API_KEY 有效且余额充足
# [ ] .env 文件权限正确（chmod 600 .env）
# [ ] .env 已添加到 .gitignore

# ============================================
# 安全最佳实践
# ============================================

# 1. 生产环境部署：
#    - 使用 Docker Secrets 或 Kubernetes Secrets
#    - 直接注入环境变量，不使用 .env 文件
#    - 示例：docker run -e PRIVATE_KEY=$KEY agent-runtime
#
# 2. Akash 部署（去中心化云）：
#    - 使用 SDL 文件中的 env 配置
#    - Akash 会将配置安全注入容器
#
# 3. 本地开发：
#    - 使用此 .env.example 创建 .env
#    - 启动后 .env 文件会被安全删除
#
# 4. 私钥丢失处理：
#    - Agent Runtime 不存储私钥，仅内存中保存
#    - 容器重启 = 新身份（无法恢复旧私钥）
#    - 确保私钥有备份在安全位置

# ============================================
# 废弃配置（不再使用）
# ============================================

# ❌ VAULT_RETRIEVAL_URL - 已废弃，不再使用 Vault 服务
# ❌ VAULT_TOKEN - 已废弃
# Agent 现在使用"野放"模式，私钥通过环境变量直接注入
